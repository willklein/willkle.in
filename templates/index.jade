extends layout

block content
  section#posts
    h3
      i.icon-file 
      | 
      | Posts

    - var posts = _.chain(contents['posts']._.pages).sortBy(function(item) {
    -   return item.metadata['date'];
    - }).value()

    each post in posts
      p
        time(datetime=post.date)= moment.utc(post.date).format('DD MMM YYYY')
        | 
        i.icon-arrow-right
        | 
        a(href=post.url)= post.title


  section#projects
    h3
      i.icon-file 
      | 
      | Projects

    - var projects = _.chain(contents['projects']._.pages).sortBy(function(item) {
    -   return item.metadata['date'];
    - }).value()

    each project in projects
      p
        i(class='icon-#{project.metadata.icon}')
        | 
        if project.metadata.link
          a(href=project.metadata.link)= project.title
        else
          = project.title

  section#talks
    h3
      i.icon-file 
      | 
      | Talks

    - var talks = _.chain(contents['talks']._.pages).sortBy(function(item) {
    -   return -item.metadata['date'];
    - }).value()

    each talk in talks
      - var title = talk.title != 'Untitled' ? talk.title : talk.metadata.titleHtml
      p
        time(datetime=talk.date)= moment.utc(talk.date).format('DD MMM YYYY')
        | 
        i.icon-arrow-right
        | 
        if talk.metadata.titleHtml
          != title
        else
          a(href=talk.metadata.link)!= title
        | 
        | @ #{talk.metadata.location}
